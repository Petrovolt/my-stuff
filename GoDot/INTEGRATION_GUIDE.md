# How to Integrate Generated Questions into Your Godot Game

This guide explains how to use the JSON questions generated by your website in the Godot game.

## Overview

The integration consists of:
1. **Game Manager** (`game_manager.gd`) - Loads questions and manages game flow
2. **Question Popup** (`question_popup.tscn` + `question_popup.gd`) - Displays questions to the player
3. **Menu** (`menu.gd`) - Connects the START button to the game

## Step-by-Step Instructions

### 1. Generate Questions from Your Website

1. Start your Flask server:
   ```bash
   python app.py
   ```

2. Go to `http://localhost:5000/play` in your browser

3. Upload a PDF or Word document

4. Click "Generate Questions"

5. Once questions are generated, click "Download Questions JSON"

6. Save the file as `questions.json` in your `GoDot/` folder

### 2. Verify the JSON Structure

Your `questions.json` should look like this:

```json
{
  "sections": [
    {
      "section_number": 1,
      "section_title": "Section 1",
      "questions": [
        {
          "question": "What is the main topic?",
          "options": {
            "A": "Option A",
            "B": "Option B",
            "C": "Option C",
            "D": "Option D"
          },
          "correct_answer": "A",
          "explanation": "Explanation of why A is correct"
        }
      ]
    }
  ],
  "total_sections": 1
}
```

### 3. Run the Game

1. Open the Godot project in the Godot editor (version 4.5+)

2. Make sure `questions.json` is in the `GoDot/` folder

3. Click the "START" button in the game

4. Questions will appear in a popup, one at a time

5. Select an answer to see if it's correct

6. The explanation will appear after you select an answer

7. Click "Close" to move to the next question

## How It Works

### Game Flow

1. **Menu Screen**: Player clicks "START"
2. **Game Manager**: Loads `questions.json` and starts the first question
3. **Question Popup**: Displays the question and 4 answer options
4. **Answer Selection**: Player clicks an option
   - Correct answers turn green
   - Wrong answers turn red
   - The correct answer is highlighted in green
5. **Explanation**: Shows explanation text
6. **Next Question**: Player clicks "Close" to continue
7. **Boss Fights**: Every 10 questions, a boss fight signal is emitted (you can add boss fight logic)
8. **Completion**: When all questions are done, the level complete signal is emitted

### File Structure

```
GoDot/
├── menu.tscn          # Menu scene (already exists)
├── menu.gd            # Menu script (connects START button)
├── game_manager.gd    # Manages questions and game flow
├── question_popup.tscn # Question popup UI scene
├── question_popup.gd   # Question popup script
├── questions.json      # Your generated questions (place here)
└── project.godot      # Godot project file
```

## Customization

### Changing the Question File Location

In `game_manager.gd`, modify the `load_questions_from_file()` call:

```gdscript
func _ready():
    # Change this path to your preferred location
    load_questions_from_file("res://questions.json")
```

### Adding Boss Fight Logic

In `menu.gd`, the `_on_boss_fight_started()` function is called every 10 questions. You can add your boss fight scene here:

```gdscript
func _on_boss_fight_started():
    print("BOSS FIGHT!")
    # Add your boss fight scene here
    # var boss_scene = preload("res://boss_fight.tscn")
    # get_tree().change_scene_to_packed(boss_scene)
```

### Styling the Question Popup

Edit `question_popup.tscn` in the Godot editor to customize:
- Colors
- Fonts
- Button styles
- Layout

## Troubleshooting

### "Error: Could not open questions file"

- Make sure `questions.json` is in the `GoDot/` folder
- Check that the file name is exactly `questions.json` (case-sensitive)
- Verify the file is not corrupted

### Questions not appearing

- Check the console for error messages
- Verify the JSON structure matches the expected format
- Make sure the game manager script is attached to a node in the scene tree

### Answers not working

- Check that the `correct_answer` field in JSON is "A", "B", "C", or "D"
- Verify all questions have the required fields: `question`, `options`, `correct_answer`, `explanation`

## Next Steps

You can extend this system by:
- Adding a score display
- Creating boss fight scenes
- Adding level progression
- Implementing power-ups or hints
- Adding sound effects
- Creating a results screen

